# move-modeling

## 좌표 변환

TM - EPSG : 5174

WGS - EPSG : 4326

- TM → WGS
- WGS → TM

## 이동 모델링

- 작업자, 이동수단의 초당 이동 표시
- TM - pygame으로 초당 이동 모델링 시각화
- WGS - Folium으로 지도에 이동 모델링 시각화

## MQTT

- pub: 초당 좌표 값 전송 및 지도 생성
- sub: 파이 게임에 좌표 시각화

### 시나리오 별 이동 모델링 정보 발행
1. 원하는 시나리오의 폴더를 번호로 입력할 수 있어야 한다.
2. 터미널, vsc로 실행할 수 있어야 한다.
3. 모드(deu/mqtt mode)를 선택할 수 있어야 한다.
4. move-modeling3/data 폴더에 존재하는 가상 테스트 시나리오 폴더 목록을 볼 수 있어야 한다.
5. 특정 시나리오 폴더에 여러 개 저장해 두어 MQTT 메시지 발행할 수 있어야 한다.
6. equ_no/serial ID 정보는 파일 명에 포함될 수 있어야 한다.
7. 이동 장비/작업자의 가상 테스트 데이터를 무한대 발행할 수 있어야 한다.
8. 다수의 mqtt client에 연결 가능할 수 있어야 한다.
9. 시나리오 발행이 끝났을 때 혹은 발행이 중단 되었을 때 발행 끝을 알리는 메시지(deu01)를 발행할 수 있어야 한다.
10. 시나리오 중 특정 장비는 두 개의 토픽(qc_speader_16/location)을 발행할 수 있어야 한다.

### deu모드 
1. 동의대 가상 테스트 데이터 생성기로 생성된 파일을 읽을 수 있어야 한다.
2. 폴더에 있는 파일을 전부 읽을 수 있어야 한다.
3. 작업자/이동 장비 구분 없이 시간 순으로 정보(Gps 정보, 시간, 속도, 방향, equ_no, serial ID)를 저장할 수 있어야 한다.
4. Gps 정보와 시간 정보(1초 간격)을 이용하여 속도, 방향 정보를 계산할 수 있어야 한다.
5. 발행된 이동 모델링 정보를 mqtt 모드에 발행할 데이터 정보로 저장할 수 있어야 한다.

### mqtt모드
1. IoT통합 플랫폼 데이터로 생성된 파일을 읽을 수 있어야 한다.
2. 폴더에 있는 파일을 전부 읽을 수 있어야 한다.
3. 작업자/이동 장비 구분 없이 시간 순으로 정보(Gps 정보, 시간, 속도, 방향, equ_no, serial ID)를 저장할 수 있어야 한다.
4. 작업자/ 이동 장비 별로 주어진 각기 다른 데이터 구분하여 발행 데이터로 변환할 수 있어야 한다.

### 이동 모델링 정보 시각화
1. mqtt 토픽을 여러 개 구독할 수 있어야 한다.
2. 파이 게임에 배경 이미지(지도)를 출력할 수 있어야 한다.
3. 마우스 오른쪽 버튼 클릭 시 배경 이미지(지도)가 변경되어야 한다.
4. 변경된 배경 이미지(지도)에 맞게 전역 좌표가 변경되어야 한다.
5. TM<->WGS 좌표 간 변환을 할 수 있어야 한다.
6. 발행 받은 이동 모델링 정보 중 GPS 정보를 이용하여 화면에 이동 장비/작업자 위치를 출력할 수 있어야 한다.
7. 출력된 이동 장비/작업자는 시각화를 위하여 이전 좌표 5개를 저장할 수 있어야 한다.
8. 시나리오 발행 끝을 알리는 메시지를 발행 받았을 때 화면에 보이는 좌표를 지울 수 있어야 한다.
9. 프로그램 실행 시간이 화면에 출력할 수 있어야 한다. 
